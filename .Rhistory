heights = c(0.5, 0.5, 0.5, 0.5, 0.5))
nhb_attempt
# 0138272 ----
# Common map_theme
map_theme <- theme(
plot.title = element_text(
hjust = .5,
vjust = 0.2,
size = 8
),
plot.margin = grid::unit(c(0, 0, 0, 0), "mm"),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()
)
# 0007 (2000 blocks are on 2000 data)
pl0007 <- read_csv("analyticalfiles/annexedblocks0007dem.csv") %>%
filter(plid=="0138272")
plids_viz <- unique(pl0007$plid)
# t1 place
pl00 <- st_read("SHP_pl/2000/AL_01/tl_2010_01_place00.shp") %>%
filter(PLCIDFP00 %in% pl0007$plid) %>%
st_transform(., 3488)
buff00 <- read_csv("2000buffers.csv") %>%
filter(!duplicated(blkid))
buff00 %<>%
filter(bufferplace %in% pl0007$plid & !is.na(blkid))
blk00 <- st_read("SHP_blk_0010/2000/AL_01/tl_2010_01_tabblock00.shp") %>%
#left_join(cw, by = c("BLKIDFP00" = "GEOID00")) %>%
#mutate(blkid = GEOID10) %>%
#filter(!is.na(blkid)) %>%
rename(blkid = BLKIDFP00) %>%
filter(blkid %in% buff00$blkid) %>%
st_transform(., 3488) %>%
left_join(pl0007, by = c("blkid")) %>%
mutate_at(vars(nhblack00b:nbmin00b), ~ifelse(pop00b == 0, 0, ((./pop00b)*100)))
# get which blocks were annexed
annexed <- blk00 %>% filter(annexed == 1)
# Create common legend breaks for
breaks <- c(0, 20, 40, 60, 80, 100)
limits = c(0, 100)
nhb_00 <- ggplot() +
geom_sf(data = pl00, size = 0.1, color = "black", fill = alpha("ghostwhite", 0.7)) +
geom_sf(data = blk00, size = 0.1, aes(fill = nhblack00b)) +
scale_fill_gradient(low="grey87", high="grey51", breaks = breaks, limits = limits) +
geom_sf(data = annexed, size = 0.5, aes(fill = nhblack00b, color = "Annexed Block"), show.legend = "line") +
scale_color_manual(values = "black", guide = guide_legend(override.aes = list(fill = "black", color = "black"))) +
labs(fill = "% Non-Hispanic Black",
caption = "2000-2007") +
theme(legend.position="none",
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()) +
map_theme
nhb_00
# 2007-2013
pl0713 <- read_csv("analyticalfiles/annexedblocks0713dem.csv") %>%
filter(plid==plids_viz)
# 2007 places (2007 blocks on 2010 boundaries for data)
pl07 <- st_read("SHP_pl/2007/fe_2007_01_place.shp") %>%
filter(PLCIDFP %in% pl0713$plid) %>%
st_transform(., 3488)
buff07 <- read_csv("blocks2007_buffers.csv") %>%
filter(!duplicated(blkid))
cw <- read_csv("cw/2000-to-2010_unique.csv")
buff07 %<>%
filter(bufferplace %in% pl0713$plid)
blk07 <- st_read("SHP_blk_0010/2000/states/AL_01_allblocks.shp") %>%
filter(BLKIDFP00 %in% buff07$blkid) %>%
st_transform(., 3488) %>%
left_join(cw, by = c("BLKIDFP00" = "GEOID00")) %>%
filter(!is.na(GEOID10)) %>%
left_join(pl0713, by = c("GEOID10" = "blkid")) %>%
mutate_at(vars(nhblack:nbmin), ~ifelse(pop == 0, 0, ((./pop)*100)))
blk07 <- st_read("SHP_blk_0010/2000/AL_01/AL_01_allblocks.shp") %>%
filter(BLKIDFP00 %in% buff07$blkid) %>%
st_transform(., 3488) %>%
left_join(cw, by = c("BLKIDFP00" = "GEOID00")) %>%
filter(!is.na(GEOID10)) %>%
left_join(pl0713, by = c("GEOID10" = "blkid")) %>%
mutate_at(vars(nhblack:nbmin), ~ifelse(pop == 0, 0, ((./pop)*100)))
blk07 <- st_read("SHP_blk_0010/2000/AL_01/AL_01_tabblock10.shp") %>%
filter(BLKIDFP00 %in% buff07$blkid) %>%
st_transform(., 3488) %>%
left_join(cw, by = c("BLKIDFP00" = "GEOID00")) %>%
filter(!is.na(GEOID10)) %>%
left_join(pl0713, by = c("GEOID10" = "blkid")) %>%
mutate_at(vars(nhblack:nbmin), ~ifelse(pop == 0, 0, ((./pop)*100)))
blk07 <- st_read("SHP_blk_0010/2000/AL_01/AL_01_tabblock00.shp") %>%
filter(BLKIDFP00 %in% buff07$blkid) %>%
st_transform(., 3488) %>%
left_join(cw, by = c("BLKIDFP00" = "GEOID00")) %>%
filter(!is.na(GEOID10)) %>%
left_join(pl0713, by = c("GEOID10" = "blkid")) %>%
mutate_at(vars(nhblack:nbmin), ~ifelse(pop == 0, 0, ((./pop)*100)))
blk07 <- st_read("SHP_blk_0010/2000/AL_01/tl_2010_01_tabblock00.shp") %>%
filter(BLKIDFP00 %in% buff07$blkid) %>%
st_transform(., 3488) %>%
left_join(cw, by = c("BLKIDFP00" = "GEOID00")) %>%
filter(!is.na(GEOID10)) %>%
left_join(pl0713, by = c("GEOID10" = "blkid")) %>%
mutate_at(vars(nhblack:nbmin), ~ifelse(pop == 0, 0, ((./pop)*100)))
annexed <- blk07 %>%
filter(annexed == 1)
nhb_07 <- ggplot() +
geom_sf(data = pl07, size = 0.1, color = "black", fill = alpha("ghostwhite", 0.7)) +
geom_sf(data = blk07, size = 0.1, aes(fill = nhblack)) +
scale_fill_gradient(low="grey87", high="grey51", breaks = breaks, limits = limits) +
geom_sf(data = annexed, size = 0.75, aes(fill = nhblack, color = "Annexed Block"), show.legend = "line") +
scale_color_manual(values = "black", guide = guide_legend(override.aes = list(fill = "black", color = "black"))) +
labs(fill = "% Non-Hispanic Black",
caption = "2007-2013") +
theme(legend.position="none",
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()) +
map_theme
nhb_07
blk07 <- st_read("SHP_blk_0010/2007/states/AL_01_allblocks.shp") %>%
filter(BLKIDFP %in% buff07$blkid) %>%
st_transform(., 3488) %>%
left_join(cw, by = c("BLKIDFP" = "GEOID00")) %>%
filter(!is.na(GEOID10)) %>%
left_join(pl0713, by = c("GEOID10" = "blkid")) %>%
mutate_at(vars(nhblack:nbmin), ~ifelse(pop == 0, 0, ((./pop)*100)))
annexed <- blk07 %>%
filter(annexed == 1)
nhb_07 <- ggplot() +
geom_sf(data = pl07, size = 0.1, color = "black", fill = alpha("ghostwhite", 0.7)) +
geom_sf(data = blk07, size = 0.1, aes(fill = nhblack)) +
scale_fill_gradient(low="grey87", high="grey51", breaks = breaks, limits = limits) +
geom_sf(data = annexed, size = 0.75, aes(fill = nhblack, color = "Annexed Block"), show.legend = "line") +
scale_color_manual(values = "black", guide = guide_legend(override.aes = list(fill = "black", color = "black"))) +
labs(fill = "% Non-Hispanic Black",
caption = "2007-2013") +
theme(legend.position="none",
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()) +
map_theme
nhb_07
# 2014-2020
pl1420 <- read_csv("analyticalfiles/annexedblocks1420dem.csv") %>%
filter(plid==plids_viz)
# 2014 places
pl14 <- st_read("SHP_pl/2014/AL_01/tl_2014_01_place.shp") %>%
filter(GEOID %in% plids_viz) %>%
st_transform(., 3488)
blk14 <- st_read("SHP_blk_0010/2014/AL_01/tl_2014_01_tabblock10.shp") %>%
filter(GEOID10 %in% pl1420$blkid) %>%
filter(!duplicated(GEOID10)) %>%
st_transform(., 3488) %>%
left_join(pl1420, by = c("GEOID10" = "blkid")) %>%
mutate_at(vars(nhblack:nbmin), ~ifelse(pop == 0, 0, ((./pop)*100)))
# which were annexed in 2020
annexed <- blk14 %>%
filter(annexed == 1)
nhb_14 <- ggplot() +
geom_sf(data = blk14, size = 0.1, aes(fill = nhblack)) +
geom_sf(data = pl14, size = 0.1, color = "black", fill = alpha("ghostwhite", 0.7)) +
scale_fill_gradient(low="grey87", high="grey51", breaks =  breaks, limits = limits) +
geom_sf(data = annexed, size = 0.75, aes(fill = nhblack, color = "Annexed Block"), show.legend = "line") +
scale_color_manual(values = "black", guide = guide_legend(override.aes = list(fill = "black", color = "black"))) +
labs(color='Annexed',
fill = "% Non-Hispanic Black",
caption = "2014-2020") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()) +
map_theme
nhb_14
leg <- as_ggplot(get_legend(nhb_14))
nhb_14 <- nhb_14 +
theme(legend.position = "none")
pl20 <- st_read("SHP_pl/2020/tl_2020_01_place.shp") %>%
filter(GEOID %in% plids_viz) %>%
st_transform(., 3488)
nhb_20 <- ggplot() +
geom_sf(data = pl20, size = 0.1, color = "black", fill = alpha("ghostwhite", 0.7)) +
labs(caption = "2020") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()) +
map_theme
nhb_attempt <- ggarrange(
plotlist = list(nhb_00, nhb_07, leg, nhb_14, nhb_20), ncol = 3, nrow = 2, widths = c(1, 1, 1, 1, 1),
heights = c(1, 1, 1, 1, 1))
nhb_attempt
ggsave("analyticalfiles/final/Jacksonville_annex_0020.pdf",
plot = nhb_attempt)
# place 1304000 ####
map_theme <- theme(
plot.title = element_text(
hjust = .5,
vjust = 0.2,
size = 8
),
plot.margin = grid::unit(c(0, 0, 0, 0), "mm"),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()
)
# 0007 (2000 blocks are on 2000 data)
pl0007 <- read_csv("analyticalfiles/annexedblocks0007dem.csv") %>%
filter(plid=="1304000")
plids_viz <- unique(pl0007$plid)
# t1 place
pl00 <- st_read("SHP_pl/2000/GA_13/tl_2010_13_place00.shp") %>%
filter(PLCIDFP00 %in% pl0007$plid) %>%
st_transform(., 3488)
buff00 <- read_csv("2000buffers.csv") %>%
filter(!duplicated(blkid))
buff00 %<>%
filter(bufferplace %in% pl0007$plid & !is.na(blkid))
blk00 <- st_read("SHP_blk_0010/2000/GA_13/tl_2010_13_tabblock00.shp") %>%
#left_join(cw, by = c("BLKIDFP00" = "GEOID00")) %>%
#mutate(blkid = GEOID10) %>%
#filter(!is.na(blkid)) %>%
rename(blkid = BLKIDFP00) %>%
filter(blkid %in% buff00$blkid) %>%
st_transform(., 3488) %>%
left_join(pl0007, by = c("blkid")) %>%
mutate_at(vars(nhblack00b:nbmin00b), ~ifelse(pop00b == 0, 0, ((./pop00b)*100)))
# get which blocks were annexed
annexed <- blk00 %>% filter(annexed == 1)
# Create common legend breaks for
breaks <- c(0, 20, 40, 60, 80, 100)
limits = c(0, 100)
nhb_00 <- ggplot() +
geom_sf(data = pl00, size = 0.1, color = "black", fill = alpha("ghostwhite", 0.7)) +
geom_sf(data = blk00, size = 0.1, aes(fill = nhblack00b)) +
scale_fill_gradient(low="grey87", high="grey51", breaks = breaks, limits = limits) +
geom_sf(data = annexed, size = 0.5, aes(fill = nhblack00b, color = "Annexed Block"), show.legend = "line") +
scale_color_manual(values = "black", guide = guide_legend(override.aes = list(fill = "black", color = "black"))) +
labs(fill = "% Non-Hispanic Black",
caption = "2000-2007") +
theme(legend.position="none",
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()) +
map_theme
nhb_00
# 2007-2013
pl0713 <- read_csv("analyticalfiles/annexedblocks0713dem.csv") %>%
filter(plid==plids_viz)
# 2007 places (2007 blocks on 2010 boundaries for data)
pl07 <- st_read("SHP_pl/2007/fe_2007_13_place.shp") %>%
filter(PLCIDFP %in% pl0713$plid) %>%
st_transform(., 3488)
buff07 <- read_csv("2007buffers.csv") %>%
filter(!duplicated(blkid))
cw <- read_csv("cw/2000-to-2010_unique.csv")
buff07 %<>%
filter(bufferplace %in% pl0713$plid)
blk07 <- st_read("SHP_blk_0010/2000/GA_13/tl_2010_13_tabblock00.shp") %>%
filter(BLKIDFP00 %in% buff07$blkid) %>%
st_transform(., 3488) %>%
left_join(cw, by = c("BLKIDFP00" = "GEOID00")) %>%
#filter(!is.na(GEOID10)) %>%
left_join(pl0713, by = c("GEOID10" = "blkid")) %>%
mutate_at(vars(nhblack:nbmin), ~ifelse(pop == 0 | is.na(pop), 0, ((./pop)*100)))
annexed <- blk07 %>%
filter(annexed == 1)
nhb_07 <- ggplot() +
geom_sf(data = pl07, size = 0.1, color = "black", fill = alpha("ghostwhite", 0.7)) +
geom_sf(data = blk07, size = 0.1, aes(fill = nhblack)) +
scale_fill_gradient(low="grey87", high="grey51", breaks = breaks, limits = limits) +
geom_sf(data = annexed, size = 0.75, aes(fill = nhblack, color = "Annexed Block"), show.legend = "line") +
scale_color_manual(values = "black", guide = guide_legend(override.aes = list(fill = "black", color = "black"))) +
labs(fill = "% Non-Hispanic Black",
caption = "2007-2013") +
theme(legend.position="none",
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()) +
map_theme
nhb_07
# 2014-2020
pl1420 <- read_csv("analyticalfiles/annexedblocks1420dem.csv") %>%
filter(plid==plids_viz)
# 2014 places
pl14 <- st_read("SHP_pl/2014/GA_13/tl_2014_13_place.shp") %>%
filter(GEOID %in% plids_viz) %>%
st_transform(., 3488)
blk14 <- st_read("SHP_blk_0010/2014/GA_13/tl_2014_13_tabblock10.shp") %>%
filter(GEOID10 %in% pl1420$blkid) %>%
filter(!duplicated(GEOID10)) %>%
st_transform(., 3488) %>%
left_join(pl1420, by = c("GEOID10" = "blkid")) %>%
mutate_at(vars(nhblack:nbmin), ~ifelse(pop == 0, 0, ((./pop)*100)))
# which were annexed in 2020
annexed <- blk14 %>%
filter(annexed == 1)
nhb_14 <- ggplot() +
geom_sf(data = blk14, size = 0.1, aes(fill = nhblack)) +
geom_sf(data = pl14, size = 0.1, color = "black", fill = alpha("ghostwhite", 0.7)) +
scale_fill_gradient(low="grey87", high="grey51", breaks =  breaks, limits = limits) +
geom_sf(data = annexed, size = 0.75, aes(fill = nhblack, color = "Annexed Block"), show.legend = "line") +
scale_color_manual(values = "black", guide = guide_legend(override.aes = list(fill = "black", color = "black"))) +
labs(color='Annexed',
fill = "% Non-Hispanic Black",
caption = "2014-2020") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()) +
map_theme
nhb_14
leg <- as_ggplot(get_legend(nhb_14))
nhb_14 <- nhb_14 +
theme(legend.position = "none")
pl20 <- st_read("SHP_pl/2020/tl_2020_13_place.shp") %>%
filter(GEOID %in% plids_viz) %>%
st_transform(., 3488)
nhb_20 <- ggplot() +
geom_sf(data = pl20, size = 0.1, color = "black", fill = alpha("ghostwhite", 0.7)) +
labs(caption = "2020") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()) +
map_theme
nhb_20
nhb_attempt <- ggarrange(
plotlist = list(nhb_00, nhb_07, leg, nhb_14, nhb_20), ncol = 3, nrow = 2, widths = c(1, 1, 1, 1, 1),
heights = c(0.5, 0.5, 0.5, 0.5, 0.5))
nhb_attempt
ggsave("analyticalfiles/final/Atlanta_annex_0020.pdf",
plot = nhb_attempt)
nhb_attempt <- ggarrange(
plotlist = list(nhb_00, nhb_07, leg, nhb_14, nhb_20), ncol = 3, nrow = 2, widths = c(1, 1, 1, 1, 1),
heights = c(1, 1, 1, 1, 1))
ggsave("analyticalfiles/final/Atlanta_annex_0020.pdf",
plot = nhb_attempt)
# 1379948 ----
# Common map_theme
map_theme <- theme(
plot.title = element_text(
hjust = .5,
vjust = 0.2,
size = 8
),
plot.margin = grid::unit(c(0, 0, 0, 0), "mm"),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()
)
# 0007 (2000 blocks are on 2000 data)
pl0007 <- read_csv("analyticalfiles/annexedblocks0007dem.csv") %>%
filter(plid=="1379948")
plids_viz <- unique(pl0007$plid)
# t1 place
pl00 <- st_read("SHP_pl/2000/GA_13/tl_2010_13_place00.shp") %>%
filter(PLCIDFP00 %in% pl0007$plid) %>%
st_transform(., 3488)
buff00 <- read_csv("2000buffers.csv") %>%
filter(!duplicated(blkid))
buff00 %<>%
filter(bufferplace %in% pl0007$plid & !is.na(blkid))
blk00 <- st_read("SHP_blk_0010/2000/GA_13/tl_2010_13_tabblock00.shp") %>%
#left_join(cw, by = c("BLKIDFP00" = "GEOID00")) %>%
#mutate(blkid = GEOID10) %>%
#filter(!is.na(blkid)) %>%
rename(blkid = BLKIDFP00) %>%
filter(blkid %in% buff00$blkid) %>%
st_transform(., 3488) %>%
left_join(pl0007, by = c("blkid")) %>%
mutate_at(vars(nhblack00b:nbmin00b), ~ifelse(pop00b == 0, 0, ((./pop00b)*100)))
# get which blocks were annexed
annexed <- blk00 %>% filter(annexed == 1)
# Create common legend breaks for
breaks <- c(0, 20, 40, 60, 80, 100)
limits = c(0, 100)
nhb_00 <- ggplot() +
geom_sf(data = pl00, size = 0.1, color = "black", fill = alpha("ghostwhite", 0.7)) +
geom_sf(data = blk00, size = 0.1, aes(fill = nhblack00b)) +
scale_fill_gradient(low="grey87", high="grey51", breaks = breaks, limits = limits) +
#geom_sf(data = annexed, size = 0.5, aes(fill = nhblack00b, color = "Annexed Block"), show.legend = "line") +
scale_color_manual(values = "black", guide = guide_legend(override.aes = list(fill = "black", color = "black"))) +
labs(fill = "% Non-Hispanic Black",
caption = "2000-2007 \n (no annexations)") +
theme(legend.position="none",
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()) +
map_theme
nhb_00
# 2007-2013
pl0713 <- read_csv("analyticalfiles/annexedblocks0713dem.csv") %>%
filter(plid==plids_viz)
# 2007 places (2007 blocks on 2010 boundaries for data)
pl07 <- st_read("SHP_pl/2007/fe_2007_13_place.shp") %>%
filter(PLCIDFP %in% pl0713$plid) %>%
st_transform(., 3488)
buff07 <- read_csv("2007buffers.csv") %>%
filter(!duplicated(blkid))
cw <- read_csv("cw/2000-to-2010_unique.csv")
buff07 %<>%
filter(bufferplace %in% pl0713$plid)
blk07 <- st_read("SHP_blk_0010/2000/GA_13/tl_2010_13_tabblock00.shp") %>%
filter(BLKIDFP00 %in% buff07$blkid) %>%
st_transform(., 3488) %>%
left_join(cw, by = c("BLKIDFP00" = "GEOID00")) %>%
#filter(!is.na(GEOID10)) %>%
left_join(pl0713, by = c("GEOID10" = "blkid")) %>%
mutate_at(vars(nhblack:nbmin), ~ifelse(pop == 0 | is.na(pop), 0, ((./pop)*100)))
annexed <- blk07 %>%
filter(annexed == 1)
nhb_07 <- ggplot() +
geom_sf(data = pl07, size = 0.1, color = "black", fill = alpha("ghostwhite", 0.7)) +
geom_sf(data = blk07, size = 0.1, aes(fill = nhblack)) +
scale_fill_gradient(low="grey87", high="grey51", breaks = breaks, limits = limits) +
#geom_sf(data = annexed, size = 0.75, aes(fill = nhblack, color = "Annexed Block"), show.legend = "line") +
scale_color_manual(values = "black", guide = guide_legend(override.aes = list(fill = "black", color = "black"))) +
labs(fill = "% Non-Hispanic Black",
caption = "2007-2013 \n (no annexations)") +
theme(legend.position="none",
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()) +
map_theme
nhb_07
# 2014-2020
pl1420 <- read_csv("analyticalfiles/annexedblocks1420dem.csv") %>%
filter(plid==plids_viz)
# 2014 places
pl14 <- st_read("SHP_pl/2014/GA_13/tl_2014_13_place.shp") %>%
filter(GEOID %in% plids_viz) %>%
st_transform(., 3488)
blk14 <- st_read("SHP_blk_0010/2014/GA_13/tl_2014_13_tabblock10.shp") %>%
filter(GEOID10 %in% pl1420$blkid) %>%
filter(!duplicated(GEOID10)) %>%
st_transform(., 3488) %>%
left_join(pl1420, by = c("GEOID10" = "blkid")) %>%
mutate_at(vars(nhblack:nbmin), ~ifelse(pop == 0, 0, ((./pop)*100)))
# which were annexed in 2020
annexed <- blk14 %>%
filter(annexed == 1)
nhb_14 <- ggplot() +
geom_sf(data = blk14, size = 0.1, aes(fill = nhblack)) +
geom_sf(data = pl14, size = 0.1, color = "black", fill = alpha("ghostwhite", 0.7)) +
scale_fill_gradient(low="grey87", high="grey51", breaks =  breaks, limits = limits) +
#geom_sf(data = annexed, size = 0.75, aes(fill = nhblack, color = "Annexed Block"), show.legend = "line") +
scale_color_manual(values = "black", guide = guide_legend(override.aes = list(fill = "black", color = "black"))) +
labs(color='Annexed',
fill = "% Non-Hispanic Black",
caption = "2014-2020 \n (no annexations)") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()) +
map_theme
nhb_14
leg <- as_ggplot(get_legend(nhb_14))
nhb_14 <- nhb_14 +
theme(legend.position = "none")
pl20 <- st_read("SHP_pl/2020/tl_2020_13_place.shp") %>%
filter(GEOID %in% plids_viz) %>%
st_transform(., 3488)
nhb_20 <- ggplot() +
geom_sf(data = pl20, size = 0.1, color = "black", fill = alpha("ghostwhite", 0.7)) +
labs(caption = "2020") +
theme(axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank()) +
map_theme
nhb_20
nhb_attempt <- ggarrange(
plotlist = list(nhb_00, nhb_07, leg, nhb_14, nhb_20), ncol = 3, nrow = 2, widths = c(1, 1, 1, 1, 1),
heights = c(1, 1, 1, 1, 1))
nhb_attempt
ggsave("analyticalfiles/final/Waleska_annex_0020.pdf",
plot = nhb_attempt)
table(panel0020_did$annexing[panel0020_did$time == "2007 to 2013"])
table(panel0020_did$annexing[panel0020_did$time == "2014 to 2020"])
table(panel0020_did$vraa)
338/nrow(panel0020_did)
table(panel0020_did$vraa[panel0020_did$time %in% c("2007 to 2013", "2014 to 2020")])
278/278_31596
278/278+31596
278/(278+31596)
table(panel0020_did$underbound_black_vraa)
table(panel0020_did$underbound_hisp_vraa)
table(panel0020_did$underbound_asian_vraa)
table(panel0020_did$underbound_nbmin_vraa)
table(panel0020_did$underbound_blackvap_vraa)
table(panel0020_did$underbound_hispvap_vraa)
table(panel0020_did$underbound_othervap_vraa)
table(panel0020_did$underbound_natvievap_vraa)
table(panel0020_did$underbound_nativevap_vraa)
table(panel0020_did$underbound_asianvap_vraa)
table(panel0020_did$underbound_blackvap_vraa[panel0020_did$time %in% c("2007 to 2013", "2014 to 2020")])
table(panel0020_did$annexing[panel0020_did$time %in% c("2007 to 2013", "2014 to 2020")])
